const AliveStatus={Empty:-1,Defended:0,Unknown:1,Suspect:2,Crewmate:3,Imposter:4,Killed:5,Ejected:6},Misc={Round:0,Result:1,Status:2},g_oPhrases={ru:{misc:["Раунд","Итог раунда","Статус"],statusShort:["Н","?","П","М","И","У","В"],status:["Надежн.","?","Подозр.","Мирный","Импостер","Убит","Выброшен"],statusFull:["Надежный","Неизвестный","Подозреваемый","","","",""]},en:{misc:["Round","Round result","Status"],statusShort:["T","?","S","C","I","K","E"],status:["Trusted","Unknown","Suspect","Crewmate","Impostor","Killed","Ejected"],statusFull:["","","","","","",""]}},g_aCrewmateColor=["#132ED1","#3F474E","#6B31BC","#71491E","#C51111","#117F2D","#ED54BA","#EF7D0E","#50EF39","#F6F658","#38FEDB","#D6E0F0"],g_sLang="ru"===window.navigator.language.slice(0,2)?"ru":"en",getCssOverlayClass=t=>"overlay-"+g_oPhrases.en.status[t].toLowerCase(),getFullPhrase=t=>g_oPhrases[g_sLang].statusFull[t]?g_oPhrases[g_sLang].statusFull[t]:g_oPhrases[g_sLang].status[t],hasOverlay=t=>t.dataset.status>AliveStatus.Suspect,g_aCards=[];let g_iRound=1;const MAX_ROUND=8,btnRound=document.querySelector(".btn-round"),btnText=document.querySelector(".btn-round-num"),btnRoundText=document.querySelector(".btn-round-text");btnRoundText.textContent=g_oPhrases[g_sLang].misc[Misc.Round],btnRound.addEventListener("click",onRoundBtnClick);const btnRestart=document.querySelector(".btn-restart");function createCards(){const t=document.querySelector(".card-containter");for(const[e,s]of g_aCrewmateColor.entries()){const a=document.createElement("div");a.classList.add("card"),a.style.backgroundColor=s,a.dataset.status=AliveStatus.Unknown,a.dataset.round=0;const n=document.createElement("h6");e>5&&(n.style.color="#000");const o=document.createElement("div");o.classList.add("card-status-container","card-container-indent");for(let t=0;t<8;t++){const e=document.createElement("div");e.classList.add("card-status"),o.append(e),e.addEventListener("mouseenter",onMouseEnterStatus.bind(n,e,t+1)),e.addEventListener("mouseout",onMouseOverStatus.bind(n)),e.addEventListener("click",onClickStatus.bind(e,a,t)),updateCardStatus(e,t?AliveStatus.Empty:AliveStatus.Unknown)}o.firstChild.classList.add("card-status-active");const d=document.createElement("div");d.classList.add("btn-group","card-container-indent"),d.setAttribute("role","group"),d.setAttribute("aria-label","Round status card "+e);const c=document.createElement("div");c.classList.add("card-verdict-container","card-container-indent");for(let t=AliveStatus.Defended;t<=AliveStatus.Ejected;t++){let s;const o=t>AliveStatus.Suspect;o?(s=document.createElement("button"),s.classList.add("btn-verdict","btn-"+getCssOverlayClass(t)),c.append(s)):(s=document.createElement("input"),s.classList.add("btn-check"),s.setAttribute("type","radio"),s.setAttribute("name","btnradio-"+e),s.setAttribute("id",`radio-${e}-${t}`),s.setAttribute("autocomplete","off"),s.dataset.status=t,t===AliveStatus.Unknown&&s.setAttribute("checked",""),d.append(s),s=document.createElement("label"),s.classList.add("btn","btn-status"),s.setAttribute("for",`radio-${e}-${t}`),s.append(document.createTextNode(g_oPhrases[g_sLang].status[t])),d.append(s)),s.addEventListener("click",onStatusBtnClick.bind(a,e,t,o)),s.addEventListener("mouseenter",onMouseEnterBtn.bind(n,t,o)),s.addEventListener("mouseout",onMouseOverBtn.bind(n))}const r=document.createElement("div");r.classList.add("card-control-container"),r.append(n);const u=document.createElement("button");u.classList.add("btn-close"),u.addEventListener("click",onCloseBtnClick.bind(a)),r.append(u);const i=document.createElement("div");i.classList.add("card-content-container","card-container-indent"),i.append(o),i.append(d),i.append(c),a.append(r),a.append(i),t.append(a),g_aCards.push(a)}}function onRoundBtnClick(){if(!(g_iRound>=8)){for(const t of g_aCards)t.dataset.round=g_iRound,updateCardRound(t,hasOverlay(t)?t.dataset.status:AliveStatus.Unknown),resetCardRadio(t);btnText.textContent=++g_iRound}}function onCloseBtnClick(){this.classList.add("opacity-0"),this.addEventListener("transitionend",(function(){this.classList.add("hidden")}))}function onStatusBtnClick(t,e,s=!1){const a=this.querySelectorAll(".card-status");if(console.log(`onStatusBtnClick > Card: ${t}, status: ${e}, statusNums: ${a.length}`),updateCardRound(this),updateCardStatus(a[this.dataset.round],e),s){uncheckedCardRadio(this);const s=this.querySelector(".card-content-container");s.classList.add(getCssOverlayClass(e));const a=this;setTimeout(()=>{s.addEventListener("click",()=>{console.log(`onStatusBtnClick > Card: ${t} Remove overlay`),s.classList.remove(getCssOverlayClass(e)),this.dataset.status=AliveStatus.Unknown,resetCardRadio(a),updateCardRound(a,AliveStatus.Unknown)},{once:!0})},200)}this.dataset.status=e}function onMouseEnterBtn(t,e=!1){this.innerHTML=g_oPhrases[g_sLang].misc[e?Misc.Status:Misc.Result]+": "+getFullPhrase(t),this.classList.add("opacity-1")}function onMouseOverBtn(){this.classList.remove("opacity-1")}function onMouseEnterStatus(t,e){let s=getFullPhrase(t.dataset.status);s=s?": "+s:"",this.innerHTML=g_oPhrases[g_sLang].misc[Misc.Round]+" "+e+s,this.classList.add("opacity-1")}function onMouseOverStatus(){this.classList.remove("opacity-1")}function onClickStatus(t,e){this.dataset.status!=AliveStatus.Empty&&(hasOverlay(this)?uncheckedCardRadio(t):checkedCardRadioByStatus(t,this.dataset.status),t.dataset.round=e,updateCardRound(t,void 0,!1))}function uncheckedCardRadio(t){const e=t.querySelectorAll(".btn-check");for(const t of e)t.checked=!1}function checkedCardRadioByStatus(t,e){const s=t.querySelectorAll(".btn-check");for(const t of s)t.dataset.status==e&&(t.checked=!0)}function updateCardRound(t,e=AliveStatus.Empty,s=!0){const a=t.querySelectorAll(".card-status");for(const[n,o]of a.entries())o.classList.remove("card-status-active"),n==t.dataset.round&&(o.classList.add("card-status-active"),s&&updateCardStatus(o,e))}function updateCardStatus(t,e){e!=AliveStatus.Empty&&(t.innerHTML=g_oPhrases[g_sLang].statusShort[e]),t.dataset.status=e}function resetCardRadio(t){if(hasOverlay(t))return;const e=t.querySelectorAll(".btn-check");for(const t of e)t.dataset.status==AliveStatus.Unknown&&t.click()}btnRestart.addEventListener("click",(function(){document.location.reload()})),createCards();
//# sourceMappingURL=scripts.min.js.map
