const AliveStatus={Empty:-1,Defended:0,Unknown:1,Suspect:2,Crewmate:3,Imposter:4,Killed:5,Ejected:6},Misc={Round:0},g_oPhrases={ru:{misc:["Раунд"],statusShort:["К","?","Ч","М","И","У","В"],statusFull:["Красный","?","Черный","Мирный","Импостер","Убит","Выброшен"]},en:{misc:["Round"],statusShort:["D","?","S","C","I","K","E"],statusFull:["Defended","Unknown","Suspect","Crewmate","Impostor","Killed","Ejected"]}},g_aCrewmateColor=["#132ED1","#3F474E","#6B31BC","#71491E","#C51111","#117F2D","#ED54BA","#EF7D0E","#50EF39","#F6F658","#38FEDB","#D6E0F0"],g_sLang="ru"===window.navigator.language.slice(0,2)?"ru":"en",getCssOverlayClass=t=>"overlay-"+g_oPhrases.en.statusFull[t].toLowerCase(),hasOverlay=t=>t.dataset.status>AliveStatus.Suspect;let g_iRound=1;const MAX_ROUND=8,btnRound=document.querySelector(".btn-round"),btnText=document.querySelector(".btn-round-num"),btnRoundText=document.querySelector(".btn-round-text");btnRoundText.textContent=g_oPhrases[g_sLang].misc[Misc.Round],btnRound.addEventListener("click",(function(){g_iRound>=8||(btnText.textContent=++g_iRound,onRoundBtnClick())}));const btnRestart=document.querySelector(".btn-restart");function createCards(){const t=document.querySelector(".card-containter");for(const[e,n]of g_aCrewmateColor.entries()){const a=document.createElement("div");a.classList.add("card"),a.style.backgroundColor=n,a.dataset.status=AliveStatus.Unknown;const s=document.createElement("div");s.classList.add("card-status-container","card-container-indent");for(let t=0;t<8;t++)createCardStatus(s,t?AliveStatus.Empty:AliveStatus.Unknown);s.firstChild.classList.add("card-status-active");const r=document.createElement("div");r.classList.add("btn-group","card-container-indent"),r.setAttribute("role","group"),r.setAttribute("aria-label","Round status card "+e);const c=document.createElement("div");c.classList.add("card-verdict-container","card-container-indent");for(let t=AliveStatus.Defended;t<=AliveStatus.Ejected;t++)if(t<AliveStatus.Crewmate){let n=document.createElement("input");n.classList.add("btn-check"),n.setAttribute("type","radio"),n.setAttribute("name","btnradio-"+e),n.setAttribute("id",`radio-${e}-${t}`),n.setAttribute("autocomplete","off"),n.dataset.status=t,t===AliveStatus.Unknown&&n.setAttribute("checked",""),r.append(n),n=document.createElement("label"),n.classList.add("btn","btn-status"),n.setAttribute("for",`radio-${e}-${t}`),n.append(document.createTextNode(g_oPhrases[g_sLang].statusFull[t])),r.append(n),n.addEventListener("click",onStatusBtnClick.bind(a,e,t))}else{const n=document.createElement("button");n.classList.add("btn-verdict","btn-"+getCssOverlayClass(t)),n.addEventListener("click",onStatusBtnClick.bind(a,e,t,!0)),c.append(n)}const d=document.createElement("div");d.classList.add("card-control-container");const o=document.createElement("button");o.classList.add("btn-close"),o.addEventListener("click",closeCard),d.append(o);const u=document.createElement("div");u.classList.add("card-content-container","card-container-indent"),u.append(s),u.append(r),u.append(c),a.append(d),a.append(u),t.append(a)}}function closeCard(){console.log("close card",this.parentElement.parentElement),this.parentElement.parentElement.classList.add("hidden")}function onStatusBtnClick(t,e,n=!1){const a=this.querySelector(".card-status-container"),s=a.querySelectorAll("*");if(console.log(`onStatusBtnClick > Card: ${t}, status: ${e}, statusNums: ${s.length}`),updateCardRound(a),updateCardStatus(s[g_iRound-1],e),n){resetCardBtn(this);const n=this.querySelector(".card-content-container");n.classList.add(getCssOverlayClass(e)),setTimeout(()=>{n.addEventListener("click",()=>{console.log(`onStatusBtnClick > Card: ${t} Remove overlay`),n.classList.remove(getCssOverlayClass(e)),this.dataset.status=AliveStatus.Unknown},{once:!0})},200)}this.dataset.status=e}function updateCardsRound(){document.querySelector(".card-status-container").forEach(updateCardRound)}function updateCardRound(t,e=AliveStatus.Empty){const n=t.querySelectorAll("*");for(const[t,a]of n.entries())a.classList.remove("card-status-active"),t===g_iRound-1&&(a.classList.add("card-status-active"),updateCardStatus(a,e))}function createCardStatus(t,e){const n=document.createElement("div");n.classList.add("card-status"),updateCardStatus(n,e),t.append(n)}function updateCardStatus(t,e){e!=AliveStatus.Empty&&(t.innerHTML=g_oPhrases[g_sLang].statusShort[e])}function onRoundBtnClick(){const t=document.querySelectorAll(".card");for(const e of t){updateCardRound(e.querySelector(".card-status-container"),hasOverlay(e)?e.dataset.status:AliveStatus.Unknown)}resetCardsBtn()}function getCardOfChild(t){for(;t&&t.parentElement;){if(t.parentElement.classList.contains("card"))return t.parentElement;t=t.parentElement}}function resetCardsBtn(){document.querySelectorAll(".card").forEach(resetCardBtn)}function resetCardBtn(t){if(hasOverlay(t))return;const e=t.querySelectorAll(".btn-check");for(const t of e)t.dataset.status==AliveStatus.Unknown&&t.click()}btnRestart.addEventListener("click",(function(){document.location.reload()})),createCards();
//# sourceMappingURL=scripts.min.js.map
