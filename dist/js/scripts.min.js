const AliveStatus={Empty:-1,Defended:0,Unknown:1,Suspect:2,Crewmate:3,Imposter:4,Killed:5,Ejected:6},Misc={Round:0,Result:1,Status:2},g_oPhrases={ru:{misc:["Раунд","Итог раунда","Статус"],statusShort:["Н","?","П","М","И","У","В"],statusFull:["Надежн.","?","Подозр.","Мирный","Импостер","Убит","Выброшен"]},en:{misc:["Round","Round result","Status"],statusShort:["D","?","S","C","I","K","E"],statusFull:["Defended","Unknown","Suspect","Crewmate","Impostor","Killed","Ejected"]}},g_aCrewmateColor=["#132ED1","#3F474E","#6B31BC","#71491E","#C51111","#117F2D","#ED54BA","#EF7D0E","#50EF39","#F6F658","#38FEDB","#D6E0F0"],g_sLang="ru"===window.navigator.language.slice(0,2)?"ru":"en",getCssOverlayClass=t=>"overlay-"+g_oPhrases.en.statusFull[t].toLowerCase(),hasOverlay=t=>t.dataset.status>AliveStatus.Suspect;let g_iRound=1;const MAX_ROUND=8,btnRound=document.querySelector(".btn-round"),btnText=document.querySelector(".btn-round-num"),btnRoundText=document.querySelector(".btn-round-text");btnRoundText.textContent=g_oPhrases[g_sLang].misc[Misc.Round],btnRound.addEventListener("click",(function(){g_iRound>=8||(btnText.textContent=++g_iRound,onRoundBtnClick())}));const btnRestart=document.querySelector(".btn-restart");function createCards(){const t=document.querySelector(".card-containter");for(const[e,n]of g_aCrewmateColor.entries()){const s=document.createElement("div");s.classList.add("card"),s.style.backgroundColor=n,s.dataset.status=AliveStatus.Unknown;const a=document.createElement("div");a.classList.add("card-status-container","card-container-indent");for(let t=0;t<8;t++)createCardStatus(a,t?AliveStatus.Empty:AliveStatus.Unknown);a.firstChild.classList.add("card-status-active");const o=document.createElement("div");o.classList.add("btn-group","card-container-indent"),o.setAttribute("role","group"),o.setAttribute("aria-label","Round status card "+e);const r=document.createElement("div");r.classList.add("card-verdict-container","card-container-indent");const c=document.createElement("h6");for(let t=AliveStatus.Defended;t<=AliveStatus.Ejected;t++){let n;const a=t>AliveStatus.Suspect;a?(n=document.createElement("button"),n.classList.add("btn-verdict","btn-"+getCssOverlayClass(t)),r.append(n)):(n=document.createElement("input"),n.classList.add("btn-check"),n.setAttribute("type","radio"),n.setAttribute("name","btnradio-"+e),n.setAttribute("id",`radio-${e}-${t}`),n.setAttribute("autocomplete","off"),n.dataset.status=t,t===AliveStatus.Unknown&&n.setAttribute("checked",""),o.append(n),n=document.createElement("label"),n.classList.add("btn","btn-status"),n.setAttribute("for",`radio-${e}-${t}`),n.append(document.createTextNode(g_oPhrases[g_sLang].statusFull[t])),o.append(n)),n.addEventListener("click",onStatusBtnClick.bind(s,e,t,a)),n.addEventListener("mouseenter",onMouseEnter.bind(c,t,a)),n.addEventListener("mouseout",onMouseOver.bind(c))}const d=document.createElement("div");d.classList.add("card-control-container"),d.append(c);const u=document.createElement("button");u.classList.add("btn-close"),u.addEventListener("click",closeCard),d.append(u);const i=document.createElement("div");i.classList.add("card-content-container","card-container-indent"),i.append(a),i.append(o),i.append(r),s.append(d),s.append(i),t.append(s)}}function closeCard(){console.log("close card",this.parentElement.parentElement),this.parentElement.parentElement.classList.add("hidden")}function onStatusBtnClick(t,e,n=!1){const s=this.querySelector(".card-status-container"),a=s.querySelectorAll("*");if(console.log(`onStatusBtnClick > Card: ${t}, status: ${e}, statusNums: ${a.length}`),updateCardRound(s),updateCardStatus(a[g_iRound-1],e),n){resetCardBtn(this);const n=this.querySelector(".card-content-container");n.classList.add(getCssOverlayClass(e)),setTimeout(()=>{n.addEventListener("click",()=>{console.log(`onStatusBtnClick > Card: ${t} Remove overlay`),n.classList.remove(getCssOverlayClass(e)),this.dataset.status=AliveStatus.Unknown},{once:!0})},200)}this.dataset.status=e}function onMouseEnter(t,e=!1){this.innerHTML=g_oPhrases[g_sLang].misc[e?Misc.Status:Misc.Result]+": "+g_oPhrases[g_sLang].statusFull[t],this.classList.add("visible")}function onMouseOver(){this.classList.remove("visible")}function updateCardsRound(){document.querySelector(".card-status-container").forEach(updateCardRound)}function updateCardRound(t,e=AliveStatus.Empty){const n=t.querySelectorAll("*");for(const[t,s]of n.entries())s.classList.remove("card-status-active"),t===g_iRound-1&&(s.classList.add("card-status-active"),updateCardStatus(s,e))}function createCardStatus(t,e){const n=document.createElement("div");n.classList.add("card-status"),updateCardStatus(n,e),t.append(n)}function updateCardStatus(t,e){e!=AliveStatus.Empty&&(t.innerHTML=g_oPhrases[g_sLang].statusShort[e])}function onRoundBtnClick(){const t=document.querySelectorAll(".card");for(const e of t){updateCardRound(e.querySelector(".card-status-container"),hasOverlay(e)?e.dataset.status:AliveStatus.Unknown)}resetCardsBtn()}function getCardOfChild(t){for(;t&&t.parentElement;){if(t.parentElement.classList.contains("card"))return t.parentElement;t=t.parentElement}}function resetCardsBtn(){document.querySelectorAll(".card").forEach(resetCardBtn)}function resetCardBtn(t){if(hasOverlay(t))return;const e=t.querySelectorAll(".btn-check");for(const t of e)t.dataset.status==AliveStatus.Unknown&&t.click()}btnRestart.addEventListener("click",(function(){document.location.reload()})),createCards();
//# sourceMappingURL=scripts.min.js.map
