const AliveStatus={Unknown:0,Defended:1,Suspect:2,Crewmate:3,Imposter:4,Killed:5,Ejected:6},Misc={Round:0},phrases={ru:{misc:["Раунд"],statusShort:["?","К","Ч","М","И","У","В"],statusFull:["Неизвестный","Красный","Черный","Мирный","Импостер","Убит","Выброшен"]},en:{misc:["Round"],statusShort:["?","D","S","C","I","K","E"],statusFull:["Unknown","Defended","Suspect","Crewmate","Impostor","Killed","Ejected"]}},crewmateColor=["#C51111","#132ED1","#117F2D","#ED54BA","#EF7D0E","#F6F658","#3F474E","#D6E0F0","#6B31BC","#71491E","#38FEDB","#50EF39"],lang="ru"===window.navigator.language.slice(0,2)?"ru":"en",getCssOverlayClass=t=>"overlay-"+phrases.en.statusFull[t].toLowerCase();let round=1;const btnRound=document.querySelector(".btn-round"),btnText=document.querySelector(".btn-round-num"),btnRoundText=document.querySelector(".btn-round-text");btnRoundText.textContent=phrases[lang].misc[Misc.Round],btnRound.addEventListener("click",(function(){btnText.textContent=++round,updateRoundCards()}));const btnRestart=document.querySelector(".btn-restart");function createCards(){const t=document.querySelector(".card-containter");for(const[e,n]of crewmateColor.entries()){const s=document.createElement("div");s.classList.add("card-rounds"),createRoundCard(s,AliveStatus.Unknown);const a=document.createElement("div");a.classList.add("card-status");for(let t=0;t<phrases[lang].statusFull.length;t++){const n=document.createElement("button");n.classList.add("btn-status"),n.append(document.createTextNode(phrases[lang].statusFull[t])),a.append(n),n.addEventListener("click",btnStatusCallback.bind(n,e,t))}const d=document.createElement("div");d.classList.add("card"),d.style.backgroundColor=n;const o=document.createElement("button");o.classList.add("btn-close"),o.addEventListener("click",closeCard),d.append(o),d.append(s),d.append(a),t.append(d)}}function closeCard(){console.log("close card",this.parentElement),this.parentElement.classList.add("hidden")}function btnStatusCallback(t,e){const n=this.parentElement.parentElement,s=n.querySelector(".card-rounds"),a=s.querySelectorAll("*").length;console.log(`Card: ${t}, status: ${e}, statusCount: ${a}`),a<round?createRoundCard(s,e):updateRoundCardStatus(s.lastElementChild,e),e>AliveStatus.Suspect&&(n.classList.add(getCssOverlayClass(e)),n.querySelector(".btn-close").classList.add("btn-close-white"))}function createRoundCard(t,e){const n=document.createElement("div");n.classList.add("card-round"),n.dataset.status=e,updateRoundCardStatus(n,e),t.append(n)}function updateRoundCardStatus(t,e){t.innerHTML=phrases[lang].statusShort[e],t.dataset.status=e,console.log(t)}function updateRoundCards(){const t=document.querySelectorAll(".card-rounds");for(const e of t)e.lastElementChild.dataset.status>AliveStatus.Suspect||e.querySelectorAll("*").length<round&&createRoundCard(e,AliveStatus.Unknown)}btnRestart.addEventListener("click",(function(){document.location.reload()})),createCards();