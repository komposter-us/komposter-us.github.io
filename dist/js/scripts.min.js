const AliveStatus={Unknown:0,Defended:1,Suspect:2,Crewmate:3,Imposter:4},Misc={Round:0},phrases={ru:{misc:["Раунд"],statusShort:["?","К","Ч","М","И","У"],statusFull:["Неизвестный","Красный","Черный","Мирный","Импостер","Убит"]},en:{misc:["Round"],statusShort:["?","D","S","C","I","D"],statusFull:["Unknown","Defended","Suspect","Crewmate","Imposter","Dead"]}},crewmateColor=["#C51111","#132ED1","#117F2D","#ED54BA","#EF7D0E","#F6F658","#3F474E","#D6E0F0","#6B31BC","#71491E","#38FEDB","#50EF39"],lang="ru"===window.navigator.language.slice(0,2)?"ru":"en";let round=1;const btnRound=document.querySelector(".btn-round"),btnText=document.querySelector(".btn-round-num"),btnRoundText=document.querySelector(".btn-round-text");btnRoundText.textContent=phrases[lang].misc[Misc.Round],btnRound.addEventListener("click",(function(){btnText.textContent=++round,updateRoundCards()}));const btnRestart=document.querySelector(".btn-restart");function createCards(){const t=document.querySelector(".card-containter");for(const[e,n]of crewmateColor.entries()){const a=document.createElement("div");a.classList.add("card-rounds"),createRoundCard(a,AliveStatus.Unknown);const s=document.createElement("div");s.classList.add("card-status");for(let t=0;t<phrases[lang].statusFull.length;t++){const e=document.createElement("button");e.classList.add("btn-status"),e.dataset.status=t,e.append(document.createTextNode(phrases[lang].statusFull[t])),s.append(e),e.addEventListener("click",btnStatusCallback)}const o=document.createElement("div");o.classList.add("card"),o.dataset.card=e,o.style.backgroundColor=n;const d=document.createElement("button");d.classList.add("btn-close"),d.addEventListener("click",closeCard),o.append(d),o.append(a),o.append(s),t.append(o)}}function closeCard(){console.log("close card",this.parentElement),this.parentElement.classList.add("hidden")}function btnStatusCallback(){const t=this.parentElement.parentElement,e=t.querySelector(".card-rounds"),n=e.querySelectorAll("*").length;console.log(`Card: ${t.dataset.card}, status: ${this.dataset.status}, statusCount: ${n}`),n<round?createRoundCard(e,this.dataset.status):e.lastElementChild.innerHTML=phrases[lang].statusShort[this.dataset.status]}function createRoundCard(t,e){const n=document.createElement("div");n.classList.add("card-round"),n.innerHTML=phrases[lang].statusShort[e],t.append(n)}function updateRoundCards(){const t=document.querySelectorAll(".card-rounds");console.log(t);for(const e of t)e.querySelectorAll("*").length<round&&createRoundCard(e,AliveStatus.Unknown)}btnRestart.addEventListener("click",(function(){document.location.reload()})),createCards();